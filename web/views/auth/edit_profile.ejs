<%- include('../layout/header') %>

<div class="container">
  <h1>Editar Perfil</h1>

  <% if (error) { %>
  <div class="error-message">
    <p><%= error %></p>
  </div>
  <% } %> <% if (userDetails) { %>
  <form action="/api/users/<%= userDetails.id %>" method="POST">
    <div class="form-group">
      <label for="name">Nombre:</label>
      <input
        type="text"
        id="name"
        name="name"
        value="<%= userDetails.name %>"
        required
      />
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        value="<%= userDetails.email %>"
        required
      />
    </div>

    <div class="form-group">
      <label for="phone">Teléfono:</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        value="<%= userDetails.phone || '' %>"
      />
    </div>

    <h3>Cambiar Contraseña (opcional)</h3>
    <div class="form-group">
      <label for="current_password">Contraseña Actual:</label>
      <input type="password" id="current_password" name="current_password" />
    </div>

    <div class="form-group">
      <label for="new_password">Nueva Contraseña:</label>
      <input
        type="password"
        id="new_password"
        name="new_password"
        minlength="6"
      />
    </div>

    <div class="form-group">
      <label for="confirm_new_password">Confirmar Nueva Contraseña:</label>
      <input
        type="password"
        id="confirm_new_password"
        name="confirm_new_password"
        minlength="6"
      />
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Guardar Cambios</button>
      <a href="/auth/profile" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
  <% } else { %>
  <p>No se pudo cargar la información del perfil.</p>
  <% } %>
</div>

<%- include('../layout/footer') %>
